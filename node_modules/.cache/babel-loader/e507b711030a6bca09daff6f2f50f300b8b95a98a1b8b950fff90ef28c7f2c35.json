{"ast":null,"code":"import axios from 'axios';\n\n// URL base del backend\nconst API_URL = 'http://localhost:8081/api';\n\n// Crear instancia de axios\nconst api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Interceptor para agregar token JWT a las peticiones\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Interceptor para manejar errores de respuesta\napi.interceptors.response.use(response => response, error => {\n  if (error.response) {\n    // El servidor respondió con un código de error\n    if (error.response.status === 401) {\n      // Token expirado o inválido\n      localStorage.removeItem('token');\n      localStorage.removeItem('usuario');\n      window.location.href = '/login';\n    }\n  }\n  return Promise.reject(error);\n});\n\n// ==================== AUTH ====================\nexport const authService = {\n  login: async (nombreUsuario, password) => {\n    const response = await api.post('/auth/login', {\n      nombreUsuario,\n      password\n    });\n    return response.data;\n  },\n  registro: async datosUsuario => {\n    const response = await api.post('/auth/registro', datosUsuario);\n    return response.data;\n  }\n};\n\n// Función para mapear producto del backend al frontend\nconst mapearProducto = producto => ({\n  ...producto,\n  imagenUrl: producto.imagen || producto.imagenUrl,\n  enOferta: producto.oferta || producto.enOferta,\n  descuento: producto.porcentajeDescuento || producto.descuento || 0\n});\n\n// ==================== PRODUCTOS ====================\nexport const productosService = {\n  obtenerTodos: async () => {\n    const response = await api.get('/productos');\n    return response.data.map(mapearProducto);\n  },\n  obtenerPorId: async id => {\n    const response = await api.get(`/productos/${id}`);\n    return mapearProducto(response.data);\n  },\n  obtenerPorCategoria: async categoria => {\n    const response = await api.get(`/productos/categoria/${categoria}`);\n    return response.data.map(mapearProducto);\n  },\n  buscar: async nombre => {\n    const response = await api.get(`/productos/buscar?nombre=${nombre}`);\n    return response.data.map(mapearProducto);\n  },\n  obtenerOfertas: async () => {\n    const response = await api.get('/productos/ofertas');\n    return response.data.map(mapearProducto);\n  },\n  crear: async producto => {\n    // Mapear campos del frontend al backend\n    const productoBackend = {\n      ...producto,\n      imagen: producto.imagenUrl || producto.imagen,\n      oferta: producto.enOferta || producto.oferta\n    };\n    const response = await api.post('/productos', productoBackend);\n    return mapearProducto(response.data);\n  },\n  actualizar: async (id, producto) => {\n    // Mapear campos del frontend al backend\n    const productoBackend = {\n      ...producto,\n      imagen: producto.imagenUrl || producto.imagen,\n      oferta: producto.enOferta || producto.oferta\n    };\n    const response = await api.put(`/productos/${id}`, productoBackend);\n    return mapearProducto(response.data);\n  },\n  eliminar: async id => {\n    const response = await api.delete(`/productos/${id}`);\n    return response.data;\n  }\n};\n\n// ==================== CARRITO ====================\nexport const carritoService = {\n  obtener: async () => {\n    const response = await api.get('/carrito');\n    return response.data;\n  },\n  agregarItem: async (productoId, cantidad) => {\n    const response = await api.post('/carrito/items', {\n      productoId,\n      cantidad\n    });\n    return response.data;\n  },\n  actualizarCantidad: async (itemId, cantidad) => {\n    const response = await api.put(`/carrito/items/${itemId}?cantidad=${cantidad}`);\n    return response.data;\n  },\n  eliminarItem: async itemId => {\n    const response = await api.delete(`/carrito/items/${itemId}`);\n    return response.data;\n  },\n  vaciar: async () => {\n    const response = await api.delete('/carrito');\n    return response.data;\n  }\n};\n\n// ==================== PEDIDOS ====================\nexport const pedidosService = {\n  crear: async (direccionEnvio, notas) => {\n    const response = await api.post('/pedidos', {\n      direccionEnvio,\n      notas\n    });\n    return response.data;\n  },\n  obtenerMios: async () => {\n    const response = await api.get('/pedidos');\n    return response.data;\n  },\n  obtenerPorId: async id => {\n    const response = await api.get(`/pedidos/${id}`);\n    return response.data;\n  },\n  cancelar: async id => {\n    const response = await api.put(`/pedidos/${id}/cancelar`);\n    return response.data;\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","API_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","status","removeItem","window","location","href","authService","login","nombreUsuario","password","post","data","registro","datosUsuario","mapearProducto","producto","imagenUrl","imagen","enOferta","oferta","descuento","porcentajeDescuento","productosService","obtenerTodos","get","map","obtenerPorId","id","obtenerPorCategoria","categoria","buscar","nombre","obtenerOfertas","crear","productoBackend","actualizar","put","eliminar","delete","carritoService","obtener","agregarItem","productoId","cantidad","actualizarCantidad","itemId","eliminarItem","vaciar","pedidosService","direccionEnvio","notas","obtenerMios","cancelar"],"sources":["C:/Users/mathi/OneDrive/Documentos/GitHub/DSY1104_Evaluacion_Parcial_3_LevelUp-main/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\n// URL base del backend\nconst API_URL = 'http://localhost:8081/api';\n\n// Crear instancia de axios\nconst api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Interceptor para agregar token JWT a las peticiones\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Interceptor para manejar errores de respuesta\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response) {\n      // El servidor respondió con un código de error\n      if (error.response.status === 401) {\n        // Token expirado o inválido\n        localStorage.removeItem('token');\n        localStorage.removeItem('usuario');\n        window.location.href = '/login';\n      }\n    }\n    return Promise.reject(error);\n  }\n);\n\n// ==================== AUTH ====================\nexport const authService = {\n  login: async (nombreUsuario, password) => {\n    const response = await api.post('/auth/login', { nombreUsuario, password });\n    return response.data;\n  },\n\n  registro: async (datosUsuario) => {\n    const response = await api.post('/auth/registro', datosUsuario);\n    return response.data;\n  },\n};\n\n// Función para mapear producto del backend al frontend\nconst mapearProducto = (producto) => ({\n  ...producto,\n  imagenUrl: producto.imagen || producto.imagenUrl,\n  enOferta: producto.oferta || producto.enOferta,\n  descuento: producto.porcentajeDescuento || producto.descuento || 0\n});\n\n// ==================== PRODUCTOS ====================\nexport const productosService = {\n  obtenerTodos: async () => {\n    const response = await api.get('/productos');\n    return response.data.map(mapearProducto);\n  },\n\n  obtenerPorId: async (id) => {\n    const response = await api.get(`/productos/${id}`);\n    return mapearProducto(response.data);\n  },\n\n  obtenerPorCategoria: async (categoria) => {\n    const response = await api.get(`/productos/categoria/${categoria}`);\n    return response.data.map(mapearProducto);\n  },\n\n  buscar: async (nombre) => {\n    const response = await api.get(`/productos/buscar?nombre=${nombre}`);\n    return response.data.map(mapearProducto);\n  },\n\n  obtenerOfertas: async () => {\n    const response = await api.get('/productos/ofertas');\n    return response.data.map(mapearProducto);\n  },\n\n  crear: async (producto) => {\n    // Mapear campos del frontend al backend\n    const productoBackend = {\n      ...producto,\n      imagen: producto.imagenUrl || producto.imagen,\n      oferta: producto.enOferta || producto.oferta\n    };\n    const response = await api.post('/productos', productoBackend);\n    return mapearProducto(response.data);\n  },\n\n  actualizar: async (id, producto) => {\n    // Mapear campos del frontend al backend\n    const productoBackend = {\n      ...producto,\n      imagen: producto.imagenUrl || producto.imagen,\n      oferta: producto.enOferta || producto.oferta\n    };\n    const response = await api.put(`/productos/${id}`, productoBackend);\n    return mapearProducto(response.data);\n  },\n\n  eliminar: async (id) => {\n    const response = await api.delete(`/productos/${id}`);\n    return response.data;\n  },\n};\n\n// ==================== CARRITO ====================\nexport const carritoService = {\n  obtener: async () => {\n    const response = await api.get('/carrito');\n    return response.data;\n  },\n\n  agregarItem: async (productoId, cantidad) => {\n    const response = await api.post('/carrito/items', { productoId, cantidad });\n    return response.data;\n  },\n\n  actualizarCantidad: async (itemId, cantidad) => {\n    const response = await api.put(`/carrito/items/${itemId}?cantidad=${cantidad}`);\n    return response.data;\n  },\n\n  eliminarItem: async (itemId) => {\n    const response = await api.delete(`/carrito/items/${itemId}`);\n    return response.data;\n  },\n\n  vaciar: async () => {\n    const response = await api.delete('/carrito');\n    return response.data;\n  },\n};\n\n// ==================== PEDIDOS ====================\nexport const pedidosService = {\n  crear: async (direccionEnvio, notas) => {\n    const response = await api.post('/pedidos', { direccionEnvio, notas });\n    return response.data;\n  },\n\n  obtenerMios: async () => {\n    const response = await api.get('/pedidos');\n    return response.data;\n  },\n\n  obtenerPorId: async (id) => {\n    const response = await api.get(`/pedidos/${id}`);\n    return response.data;\n  },\n\n  cancelar: async (id) => {\n    const response = await api.put(`/pedidos/${id}/cancelar`);\n    return response.data;\n  },\n};\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}